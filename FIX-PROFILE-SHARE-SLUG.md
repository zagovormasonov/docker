# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: Slug –≤ –∫–Ω–æ–ø–∫–µ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–æ—Ñ–∏–ª–µ–º"

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–æ—Ñ–∏–ª–µ–º" –≤ —Ä–∞–∑–¥–µ–ª–µ "–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å" –∫–æ–ø–∏—Ä–æ–≤–∞–ª–∞—Å—å —Å—Å—ã–ª–∫–∞ —Å ID (—Ü–∏—Ñ—Ä–æ–π) –≤–º–µ—Å—Ç–æ –∫—Ä–∞—Å–∏–≤–æ–≥–æ slug:

**–ë—ã–ª–æ:**
```
https://soulsynergy.ru/experts/123
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
https://soulsynergy.ru/experts/adelya
```

## üîç –ü—Ä–∏—á–∏–Ω–∞

–í API endpoint `/users/me` (–ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è) –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–ª–æ—Å—å –ø–æ–ª–µ `slug`, –ø–æ—ç—Ç–æ–º—É –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ `AuthContext` —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –±—ã–ª–æ —ç—Ç–æ–≥–æ –ø–æ–ª—è.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. **–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `slug` –≤ endpoint `/users/me`**
**–§–∞–π–ª:** `backend/src/routes/users.ts`

```typescript
// –ë—ã–ª–æ:
SELECT id, email, name, user_type, avatar_url, bio, city, 
       vk_url, telegram_url, whatsapp, consultation_types, created_at 
FROM users WHERE id = $1

// –°—Ç–∞–ª–æ:
SELECT id, email, name, user_type, slug, avatar_url, bio, city, 
       vk_url, telegram_url, whatsapp, consultation_types, created_at 
FROM users WHERE id = $1
```

### 2. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è slug –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è**
**–§–∞–π–ª:** `backend/src/routes/users.ts` (endpoint `/users/profile`)

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∏–º–µ–Ω–∏:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–æ–≤—ã–π slug
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å slug
- ‚úÖ Slug –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç–µ API

```typescript
// –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç
import { generateUniqueSlug } from '../utils/transliterate';

// –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ slug
if (name) {
  const checkSlugExists = async (slug: string, userId: number | null): Promise<boolean> => {
    const result = await query(
      'SELECT id FROM users WHERE slug = $1 AND id != $2',
      [slug, userId || 0]
    );
    return result.rows.length > 0;
  };
  
  newSlug = await generateUniqueSlug(name, req.userId!, checkSlugExists);
}

// Slug –¥–æ–±–∞–≤–ª–µ–Ω –≤ UPDATE –∑–∞–ø—Ä–æ—Å
UPDATE users 
SET name = COALESCE($1, name), 
    ...
    slug = COALESCE($9, slug),
    updated_at = CURRENT_TIMESTAMP
WHERE id = $10
```

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ–ø–µ—Ä—å

### –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
1. API `/users/me` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–µ `slug`
2. –ö–æ–Ω—Ç–µ–∫—Å—Ç `AuthContext` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç `slug` –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `user`
3. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `ProfilePage` –≤–∏–¥–∏—Ç `user.slug`

### –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–æ—Ñ–∏–ª–µ–º":
```typescript
const identifier = user?.slug || user?.id;
const profileUrl = `${window.location.origin}/experts/${identifier}`;
// –†–µ–∑—É–ª—å—Ç–∞—Ç: https://soulsynergy.ru/experts/adelya ‚úÖ
```

### –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–º–µ–Ω–∏:
1. Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–æ–≤–æ–µ –∏–º—è –≤ `/users/profile`
2. Backend –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–π slug (–Ω–∞–ø—Ä–∏–º–µ—Ä, "novoe-imya")
3. Slug —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç–µ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ `AuthContext`
5. –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è" —Å—Ä–∞–∑—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–π slug

## üì¶ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- ‚úÖ `backend/src/routes/users.ts` - –¥–æ–±–∞–≤–ª–µ–Ω slug –≤ `/me` –∏ `/profile`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ —Å–∏—Å—Ç–µ–º–µ**
2. **–û—Ç–∫—Ä–æ–π—Ç–µ "–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å"**
3. **–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–æ—Ñ–∏–ª–µ–º"**
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Å—ã–ª–∫—É** - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å slug, –∞ –Ω–µ ID

**–ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏:**
```
https://soulsynergy.ru/experts/adelya
```

5. **–ò–∑–º–µ–Ω–∏—Ç–µ –∏–º—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ**
6. **–°–Ω–æ–≤–∞ –Ω–∞–∂–º–∏—Ç–µ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–æ—Ñ–∏–ª–µ–º"**
7. **Slug –¥–æ–ª–∂–µ–Ω –æ–±–Ω–æ–≤–∏—Ç—å—Å—è** –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –Ω–æ–≤—ã–º –∏–º–µ–Ω–µ–º

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
–°—Ç–∞—Ä—ã–µ —Å—Å—ã–ª–∫–∏ —Å ID –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å:
```
https://soulsynergy.ru/experts/123 ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç
https://soulsynergy.ru/experts/adelya ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç
```

Backend –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞!

### Fallback
–ï—Å–ª–∏ –ø–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ slug –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ID:
```typescript
const identifier = user?.slug || user?.id;
```

## üéØ –ò—Ç–æ–≥

### –ë—ã–ª–æ:
- ‚ùå –ö–æ–ø–∏—Ä–æ–≤–∞–ª–∞—Å—å —Å—Å—ã–ª–∫–∞ —Å ID: `/experts/123`
- ‚ùå Slug –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚ùå Slug –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∏–º–µ–Ω–∏

### –°—Ç–∞–ª–æ:
- ‚úÖ –ö–æ–ø–∏—Ä—É–µ—Ç—Å—è –∫—Ä–∞—Å–∏–≤—ã–π slug: `/experts/adelya`
- ‚úÖ Slug –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ Slug –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∏–º–µ–Ω–∏
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏

---

**–î–∞—Ç–∞:** 28 –Ω–æ—è–±—Ä—è 2025  
**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

