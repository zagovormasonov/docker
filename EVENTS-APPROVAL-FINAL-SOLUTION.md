# üîß –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –æ–¥–æ–±—Ä–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π

## üö® **–ü—Ä–æ–±–ª–µ–º–∞:**
–û–¥–æ–±—Ä–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –æ—à–∏–±–∫–∞ 500, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –ø–æ–ª–µ `is_published` –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

## üîç **–ü—Ä–∏—á–∏–Ω–∞:**
–°–µ—Ä–≤–µ—Ä –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª—Å—è —Å –Ω–æ–≤—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –≤ –∫–æ–¥–µ, –ø–æ—ç—Ç–æ–º—É:
- –ù–æ–≤—ã–µ endpoints –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- –õ–æ–≥–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- –û–¥–æ–±—Ä–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

## üîß **–†–µ—à–µ–Ω–∏–µ:**

### **1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
docker-compose restart backend
```

### **2. –ò–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:**
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
docker-compose down
docker-compose up -d
```

### **3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:**
```bash
docker-compose ps
```

## üß™ **–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ:**

### **1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏:**
```bash
curl "https://soulsynergy.ru/api/moderation/check-fields"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "eventsFields": [
    {"column_name": "is_published", "data_type": "boolean"},
    {"column_name": "moderated_at", "data_type": "timestamp without time zone"},
    {"column_name": "moderated_by", "data_type": "integer"},
    {"column_name": "moderation_status", "data_type": "character varying"}
  ]
}
```

### **2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–π endpoint:**
```bash
curl "https://soulsynergy.ru/api/moderation/test-approve-simple/9"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "message": "–ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –æ–¥–æ–±—Ä–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è",
  "debug": {
    "eventId": "9",
    "event": {
      "id": 9,
      "title": "–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è",
      "organizer_id": 8,
      "is_published": false,
      "moderation_status": "pending"
    },
    "timestamp": "2025-01-05T05:16:00.000Z"
  }
}
```

### **3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–¥–æ–±—Ä–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ:**
1. **–í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ú–æ–¥–µ—Ä–∞—Ü–∏—è" ‚Üí "–°–æ–±—ã—Ç–∏—è"**
3. **–ù–∞–∂–º–∏—Ç–µ "–û–¥–æ–±—Ä–∏—Ç—å"** –Ω–∞ —Å–æ–±—ã—Ç–∏–∏ —Å ID 9
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç** - –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–∫–∏ 500

## üì± **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞:**

### **–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –æ–¥–æ–±—Ä–µ–Ω–∏–∏:**
```json
{
  "message": "–°–æ–±—ã—Ç–∏–µ –æ–¥–æ–±—Ä–µ–Ω–æ",
  "debug": {
    "eventId": "9",
    "userId": 19,
    "timestamp": "2025-01-05T05:16:00.000Z",
    "step": "success"
  }
}
```

### **–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏:**
```json
{
  "message": "–°–æ–±—ã—Ç–∏–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ",
  "debug": {
    "eventId": "9",
    "userId": 19,
    "reason": "–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è",
    "timestamp": "2025-01-05T05:16:00.000Z"
  }
}
```

## üéØ **–°—Ç–∞—Ç—É—Å:**

- ‚úÖ **–ü–æ–ª–µ `is_published`** - –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–ö–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω** - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞
- ‚ùå **–°–µ—Ä–≤–µ—Ä –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å
- üîß **–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫** - –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üöÄ **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä** - `docker-compose restart backend`
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏** - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–ª–µ `is_published`
3. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–¥–æ–±—Ä–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ** - –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å
4. **–°–æ–æ–±—â–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç** - —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –º–æ–¥–µ—Ä–∞—Ü–∏—è?

## üéâ **–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞:**

–ú–æ–¥–µ—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫ 500! üöÄ
