# 📁 Структура проекта Synergy

```
synergy/
│
├── 📂 backend/                    # Backend (Node.js + Express + TypeScript)
│   ├── src/
│   │   ├── config/
│   │   │   └── database.ts        # Настройка PostgreSQL
│   │   ├── middleware/
│   │   │   └── auth.ts            # JWT аутентификация
│   │   ├── routes/
│   │   │   ├── auth.ts            # Регистрация/вход
│   │   │   ├── articles.ts        # CRUD статей
│   │   │   ├── experts.ts         # Поиск и профили экспертов
│   │   │   ├── chats.ts           # Чаты
│   │   │   ├── topics.ts          # Тематики
│   │   │   └── users.ts           # Пользователи
│   │   └── server.ts              # Главный файл сервера + Socket.io
│   ├── Dockerfile                 # Docker образ для backend
│   ├── .dockerignore
│   ├── package.json
│   ├── tsconfig.json
│   └── .env                       # Переменные окружения
│
├── 📂 frontend/                   # Frontend (React + Vite + TypeScript)
│   ├── src/
│   │   ├── api/
│   │   │   ├── axios.ts           # HTTP клиент
│   │   │   └── socket.ts          # WebSocket клиент
│   │   ├── components/
│   │   │   ├── Header.tsx         # Навигация
│   │   │   └── Layout.tsx         # Общий layout
│   │   ├── contexts/
│   │   │   └── AuthContext.tsx    # Контекст авторизации
│   │   ├── pages/
│   │   │   ├── HomePage.tsx       # Главная страница
│   │   │   ├── LoginPage.tsx      # Вход
│   │   │   ├── RegisterPage.tsx   # Регистрация
│   │   │   ├── ExpertsPage.tsx    # Поиск экспертов
│   │   │   ├── ExpertProfilePage.tsx # Профиль эксперта
│   │   │   ├── ArticlePage.tsx    # Просмотр статьи
│   │   │   ├── CreateArticlePage.tsx # Создание/редактирование статьи
│   │   │   ├── MyArticlesPage.tsx # Мои статьи
│   │   │   ├── ProfilePage.tsx    # Профиль пользователя
│   │   │   └── ChatsPage.tsx      # Чаты
│   │   ├── App.tsx                # Главный компонент
│   │   ├── App.css                # Стили
│   │   └── main.tsx               # Точка входа
│   ├── Dockerfile                 # Docker образ для frontend
│   ├── nginx.conf                 # Конфиг Nginx
│   ├── .dockerignore
│   ├── package.json
│   ├── vite.config.ts
│   └── index.html
│
├── 📂 Документация/
│   ├── README.md                  # Общее описание проекта
│   ├── INSTALL.md                 # Инструкция по установке
│   ├── DEPLOY.md                  # Деплой на Timeweb (традиционный)
│   ├── DOCKER-DEPLOY.md           # Деплой через Docker (подробно)
│   ├── БЫСТРЫЙ-ДЕПЛОЙ.md          # Деплой через Docker (кратко)
│   ├── QUICK-START.md             # Быстрый старт для разработки
│   ├── РЕШЕНИЕ-ПРОБЛЕМЫ.md        # Решение проблем с БД
│   ├── setup-local-db.md          # Настройка локальной БД
│   └── ТЕСТИРОВАНИЕ-СТАТЕЙ.md     # Тестирование системы статей
│
├── 📂 Docker конфигурация/
│   ├── docker-compose.yml         # Для локальной разработки
│   ├── docker-compose.prod.yml    # Для продакшена
│   ├── .dockerignore              # Игнорируемые файлы
│   ├── .env.production            # Переменные для продакшена
│   └── test-docker-local.bat      # Тест Docker локально
│
├── 📂 Скрипты/
│   ├── START.bat                  # Запуск для Windows
│   └── package.json               # Root package.json
│
└── .gitignore                     # Git игнорирование

```

---

## 🗄️ База данных (PostgreSQL)

### Таблицы:

1. **users** - Пользователи (клиенты и эксперты)
2. **topics** - Тематики (29 духовных практик)
3. **expert_topics** - Связь экспертов с тематиками
4. **services** - Услуги экспертов
5. **articles** - Статьи
6. **chats** - Чаты между пользователями
7. **messages** - Сообщения в чатах

---

## 🔧 Технологии

### Backend:
- **Node.js** v18+
- **Express.js** - REST API
- **TypeScript** - Типизация
- **PostgreSQL** - База данных
- **Socket.io** - WebSocket для чатов
- **JWT** - Авторизация
- **Bcrypt** - Хеширование паролей

### Frontend:
- **React 18** - UI библиотека
- **TypeScript** - Типизация
- **Vite** - Сборщик
- **Ant Design** - UI компоненты
- **React Router** - Роутинг
- **Axios** - HTTP клиент
- **Socket.io Client** - WebSocket
- **React Quill** - Rich-text редактор
- **Day.js** - Работа с датами

### DevOps:
- **Docker** - Контейнеризация
- **Docker Compose** - Оркестрация
- **Nginx** - Веб-сервер
- **PM2** - Process manager (опционально)

---

## 📊 Архитектура

```
┌─────────────┐
│   Browser   │
└──────┬──────┘
       │
       ▼
┌─────────────┐      ┌──────────────┐
│   Nginx     │─────▶│   Backend    │
│  (Frontend) │      │   (Node.js)  │
└─────────────┘      └──────┬───────┘
                            │
                            ▼
                     ┌──────────────┐
                     │  PostgreSQL  │
                     └──────────────┘
```

---

## 🌐 API Endpoints

### Auth
- `POST /api/auth/register` - Регистрация
- `POST /api/auth/login` - Вход

### Users
- `GET /api/users/me` - Текущий пользователь
- `PUT /api/users/profile` - Обновление профиля

### Experts
- `GET /api/experts/search` - Поиск экспертов
- `GET /api/experts/:id` - Профиль эксперта
- `PUT /api/experts/profile` - Обновление профиля эксперта
- `POST /api/experts/services` - Создание услуги
- `PUT /api/experts/services/:id` - Обновление услуги
- `DELETE /api/experts/services/:id` - Удаление услуги

### Articles
- `GET /api/articles` - Все статьи
- `GET /api/articles/:id` - Статья по ID
- `GET /api/articles/my/articles` - Мои статьи
- `POST /api/articles` - Создать статью
- `PUT /api/articles/:id` - Обновить статью
- `DELETE /api/articles/:id` - Удалить статью

### Chats
- `GET /api/chats` - Список чатов
- `POST /api/chats/create` - Создать чат
- `GET /api/chats/:id/messages` - Сообщения чата

### Topics
- `GET /api/topics` - Все тематики

### WebSocket Events
- `join_chat` - Присоединиться к чату
- `send_message` - Отправить сообщение
- `new_message` - Новое сообщение
- `typing` - Индикатор печати
- `user_typing` - Пользователь печатает

---

## 📝 Переменные окружения

### Backend (.env)
```env
DATABASE_URL=postgresql://...
JWT_SECRET=your-secret
PORT=3001
FRONTEND_URL=http://localhost:5173
```

### Production (.env.production)
```env
DB_PASSWORD=secure-password
JWT_SECRET=unique-secret-key
FRONTEND_URL=http://your-domain.com
PORT=80
```

---

## 🚀 Варианты деплоя

1. **Docker (рекомендуется)** - `docker-compose.prod.yml`
2. **Традиционный** - PM2 + Nginx
3. **Локальная разработка** - `npm run dev`

---

Подробности в соответствующих файлах документации!
