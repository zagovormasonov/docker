# üö® –°—Ä–æ—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: Slug –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–æ—Ñ–∏–ª–µ–º" –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞ —Å ID:
```
https://soulsynergy.ru/experts/21
```

–í–º–µ—Å—Ç–æ:
```
https://soulsynergy.ru/experts/–≤–∞—à–µ-–∏–º—è
```

## ‚úÖ –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è slug

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
psql -U postgres -d synergy -f ADD-USER-SLUG-FIELD.sql
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:**
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª–µ `slug` –≤ —Ç–∞–±–ª–∏—Ü—É `users`
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç slug –¥–ª—è –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ slug —Å–æ–∑–¥–∞–ª—Å—è

```bash
# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
psql -U postgres -d synergy -f –ü–†–û–í–ï–†–ö–ê-–ò-–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï-SLUG.sql
```

**–ò–ª–∏ –≤—Ä—É—á–Ω—É—é –≤ psql:**
```sql
-- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å (–∑–∞–º–µ–Ω–∏—Ç–µ 21 –Ω–∞ –≤–∞—à ID)
SELECT id, name, email, slug FROM users WHERE id = 21;
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
 id |   name   |        email         |    slug
----+----------+----------------------+-----------
 21 | –í–∞—à–µ –ò–º—è | your@email.com       | vashe-imya
```

### –®–∞–≥ 3: –ï—Å–ª–∏ slug = NULL, –æ–±–Ω–æ–≤–∏—Ç–µ –≤—Ä—É—á–Ω—É—é

```sql
-- –û–±–Ω–æ–≤–∏—Ç–µ slug –¥–ª—è –≤–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∑–∞–º–µ–Ω–∏—Ç–µ 21 –Ω–∞ –≤–∞—à ID)
UPDATE users 
SET slug = generate_unique_slug(name, id)
WHERE id = 21;

-- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
SELECT id, name, slug FROM users WHERE id = 21;
```

### –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend

```bash
cd backend
npm run dev
```

### –®–∞–≥ 5: –ü–ï–†–ï–õ–û–ì–ò–ù–ò–¢–¨–°–Ø

**–í–ê–ñ–ù–û!** –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —à–∞–≥!

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç
2. –ù–∞–∂–º–∏—Ç–µ "–í—ã–π—Ç–∏"
3. –í–æ–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ

**–ü–æ—á–µ–º—É?** –ü—Ä–∏ –≤—Ö–æ–¥–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –Ω–æ–≤—ã–º –ø–æ–ª–µ–º `slug`

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å

1. –û—Ç–∫—Ä–æ–π—Ç–µ "–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å"
2. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–æ—Ñ–∏–ª–µ–º"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Å—ã–ª–∫—É –≤ –±—É—Ñ–µ—Ä–µ –æ–±–º–µ–Ω–∞

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
https://soulsynergy.ru/experts/–≤–∞—à–µ-–∏–º—è
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: Slug –≤—Å—ë –µ—â—ë NULL

**–†–µ—à–µ–Ω–∏–µ 1:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–ª–∞—Å—å
```sql
SELECT proname FROM pg_proc WHERE proname = 'generate_unique_slug';
```

–ï—Å–ª–∏ –ø—É—Å—Ç–æ, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `ADD-USER-SLUG-FIELD.sql` –∑–∞–Ω–æ–≤–æ.

**–†–µ—à–µ–Ω–∏–µ 2:** –û–±–Ω–æ–≤–∏—Ç–µ slug –≤—Ä—É—á–Ω—É—é –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```sql
DO $$
DECLARE
  user_record RECORD;
  new_slug TEXT;
BEGIN
  FOR user_record IN SELECT id, name FROM users WHERE slug IS NULL LOOP
    -- –ü—Ä–æ—Å—Ç–∞—è —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è –±–µ–∑ —Ñ—É–Ω–∫—Ü–∏–∏
    new_slug := LOWER(REGEXP_REPLACE(
      TRANSLATE(user_record.name, 
        '–∞–±–≤–≥–¥–µ—ë–∂–∑–∏–π–∫–ª–º–Ω–æ–ø—Ä—Å—Ç—É—Ñ—Ö—Ü—á—à—â—ä—ã—å—ç—é—è–ê–ë–í–ì–î–ï–Å–ñ–ó–ò–ô–ö–õ–ú–ù–û–ü–†–°–¢–£–§–•–¶–ß–®–©–™–´–¨–≠–Æ–Ø ',
        'abvgdeyozhziyklmnoprstufhtsChshschyeyuyaABVGDEYOZhZIYKLMNOPRSTUFHTsChShSchYEYuYa-'
      ),
      '[^a-z0-9-]', '', 'g'
    ));
    
    -- –î–æ–±–∞–≤–ª—è–µ–º ID –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
    new_slug := new_slug || '-' || user_record.id;
    
    UPDATE users SET slug = new_slug WHERE id = user_record.id;
    RAISE NOTICE '–û–±–Ω–æ–≤–ª–µ–Ω slug –¥–ª—è %: %', user_record.name, new_slug;
  END LOOP;
END $$;
```

### –ü—Ä–æ–±–ª–µ–º–∞: Backend –Ω–µ –≤–∏–¥–∏—Ç slug

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥ backend:**
```bash
cd backend
npm run dev
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
SELECT id, email, name, user_type, slug, avatar_url...
```

–ï—Å–ª–∏ `slug` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –∑–∞–ø—Ä–æ—Å–µ, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `backend/src/routes/users.ts`

### –ü—Ä–æ–±–ª–µ–º–∞: Frontend –Ω–µ –≤–∏–¥–∏—Ç slug

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12):**
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
console.log(localStorage.getItem('user'));
```

–î–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å `"slug":"–≤–∞—à–µ-–∏–º—è"`

–ï—Å–ª–∏ –Ω–µ—Ç - **–ø–µ—Ä–µ–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å!**

## üìã –ë—ã—Å—Ç—Ä—ã–π —á–µ–∫–ª–∏—Å—Ç

- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω `ADD-USER-SLUG-FIELD.sql`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: –ø–æ–ª–µ `slug` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: —É –≤–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å slug
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω backend
- [ ] –í—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
- [ ] –í–æ—à–ª–∏ –∑–∞–Ω–æ–≤–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: –∫–Ω–æ–ø–∫–∞ –∫–æ–ø–∏—Ä—É–µ—Ç slug

## üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ

### –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:

–û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ –≤—Ä—É—á–Ω—É—é, —á—Ç–æ–±—ã –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç—É—é —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—é:

**`frontend/src/pages/ProfilePage.tsx`** (—Å—Ç—Ä–æ–∫–∞ ~508):
```typescript
onClick={async () => {
  // –í—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Å—Ç—É—é —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—é
  const slugFromName = user?.name
    .toLowerCase()
    .replace(/[–∞-—è—ë]/gi, (char) => {
      const map: any = {
        '–∞': 'a', '–±': 'b', '–≤': 'v', '–≥': 'g', '–¥': 'd',
        '–µ': 'e', '—ë': 'yo', '–∂': 'zh', '–∑': 'z', '–∏': 'i',
        '–π': 'y', '–∫': 'k', '–ª': 'l', '–º': 'm', '–Ω': 'n',
        '–æ': 'o', '–ø': 'p', '—Ä': 'r', '—Å': 's', '—Ç': 't',
        '—É': 'u', '—Ñ': 'f', '—Ö': 'h', '—Ü': 'ts', '—á': 'ch',
        '—à': 'sh', '—â': 'sch', '—ä': '', '—ã': 'y', '—å': '',
        '—ç': 'e', '—é': 'yu', '—è': 'ya'
      };
      return map[char.toLowerCase()] || char;
    })
    .replace(/[^a-z0-9]+/g, '-')
    .replace(/^-|-$/g, '');
  
  const identifier = user?.slug || slugFromName || user?.id;
  const profileUrl = `${window.location.origin}/experts/${identifier}`;
  
  try {
    await navigator.clipboard.writeText(profileUrl);
    message.success('–°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!');
  } catch (error) {
    message.error('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É');
  }
}}
```

---

**–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞–ª–∏—Å—å, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend –∏ –Ω–∞–ø–∏—à–∏—Ç–µ –æ—à–∏–±–∫—É!**

**–î–∞—Ç–∞:** 28 –Ω–æ—è–±—Ä—è 2025





