# üöÄ –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
```
"error": "column e.author_id does not exist"
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ (–≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç)

### üéØ **–í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª–Ω–æ–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

```bash
# –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è
psql -d synergy_db -f RECREATE-TABLES.sql
```

**‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï:** –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —É–¥–∞–ª–∏—Ç –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö `articles`, `events`, `notifications`!

### üîç **–í–∞—Ä–∏–∞–Ω—Ç 2: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ + –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**

```bash
# 1. –°–Ω–∞—á–∞–ª–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä—É–µ–º –ø—Ä–æ–±–ª–µ–º—É
psql -d synergy_db -f DIAGNOSE-DATABASE.sql

# 2. –ó–∞—Ç–µ–º –∏—Å–ø—Ä–∞–≤–ª—è–µ–º
psql -d synergy_db -f FIX-ALL-TABLES.sql
```

### üõ†Ô∏è **–í–∞—Ä–∏–∞–Ω—Ç 3: –†—É—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–∞–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–æ—à–∞–≥–æ–≤–æ:

```sql
-- 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ events —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
SELECT EXISTS (
  SELECT FROM information_schema.tables 
  WHERE table_name = 'events'
);

-- 2. –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª–æ–Ω–∫—É author_id –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
ALTER TABLE events ADD COLUMN IF NOT EXISTS author_id INTEGER;

-- 3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º author_id –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π
-- –ó–ê–ú–ï–ù–ò–¢–ï 1 –Ω–∞ ID –≤–∞—à–µ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞!
UPDATE events SET author_id = 1 WHERE author_id IS NULL;

-- 4. –î–µ–ª–∞–µ–º –∫–æ–ª–æ–Ω–∫—É NOT NULL
ALTER TABLE events ALTER COLUMN author_id SET NOT NULL;

-- 5. –î–æ–±–∞–≤–ª—è–µ–º –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á
ALTER TABLE events ADD CONSTRAINT fk_events_author_id 
FOREIGN KEY (author_id) REFERENCES users(id) ON DELETE CASCADE;
```

## üöÄ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend —Å–µ—Ä–≤–µ—Ä**
2. **–û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω—Å–∫—É—é –ø–∞–Ω–µ–ª—å**
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** - –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è:
   ```
   üîç –ó–∞–ø—Ä–æ—Å —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∞–¥–º–∏–Ω–∞
   üìä –¢–∞–±–ª–∏—Ü–∞ events —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: true
   ‚úÖ –°–æ–±—ã—Ç–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã: X
   ```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```sql
-- –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã events
SELECT column_name, data_type, is_nullable 
FROM information_schema.columns 
WHERE table_name = 'events' 
ORDER BY ordinal_position;
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–æ–ª–æ–Ω–∫–∏:
- ‚úÖ `id`
- ‚úÖ `title`
- ‚úÖ `description`
- ‚úÖ `location`
- ‚úÖ `event_date`
- ‚úÖ `author_id` ‚Üê **—ç—Ç–æ –≥–ª–∞–≤–Ω–æ–µ!**
- ‚úÖ `is_published`
- ‚úÖ `created_at`
- ‚úÖ `updated_at`

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–°–¥–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø** –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º —Å–∫—Ä–∏–ø—Ç–æ–≤
2. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å ID=1 —Å—É—â–µ—Å—Ç–≤—É–µ—Ç** –≤ —Ç–∞–±–ª–∏—Ü–µ `users`
3. **–ï—Å–ª–∏ —É –≤–∞—Å –¥—Ä—É–≥–æ–π ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**, –∏–∑–º–µ–Ω–∏—Ç–µ –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö `1` –Ω–∞ –≤–∞—à ID
4. **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è** –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend —Å–µ—Ä–≤–µ—Ä

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –í–∞—Ä–∏–∞–Ω—Ç 1** (RECREATE-TABLES.sql) - —ç—Ç–æ —Å–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π —Å–ø–æ—Å–æ–± –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–∞–∑–æ–º.
